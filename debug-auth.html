<!DOCTYPE html>
<html>
<head>
    <title>Debug Google Authentication</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 4px solid #007cba; }
        .error { border-left-color: #d32f2f; background: #ffebee; }
        .success { border-left-color: #4caf50; background: #e8f5e8; }
        button { padding: 10px 20px; margin: 5px; background: #007cba; color: white; border: none; cursor: pointer; }
        button:hover { background: #005a8b; }
        #logs { max-height: 400px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>Google Authentication Debug Tool</h1>
    
    <div>
        <button onclick="testGoogleAuth()">Test Google Authentication</button>
        <button onclick="clearLogs()">Clear Logs</button>
        <button onclick="checkAuthState()">Check Current Auth State</button>
    </div>
    
    <h2>Debug Logs:</h2>
    <div id="logs"></div>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Open browser console (F12) and go to Console tab</li>
        <li>Click "Test Google Authentication" button</li>
        <li>Complete Google sign-in process</li>
        <li>Watch both this page logs and browser console</li>
        <li>Look for specific error messages or missing steps</li>
    </ol>

    <script>
        function log(message, type = 'info') {
            const logs = document.getElementById('logs');
            const logDiv = document.createElement('div');
            logDiv.className = `log ${type}`;
            logDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            logs.appendChild(logDiv);
            logs.scrollTop = logs.scrollHeight;
            console.log(`[DEBUG] ${message}`);
        }

        function clearLogs() {
            document.getElementById('logs').innerHTML = '';
        }

        function testGoogleAuth() {
            log('Starting Google authentication test...', 'info');
            window.open('http://localhost:3000/login', '_blank');
        }

        function checkAuthState() {
            log('Checking current authentication state...', 'info');
            
            // Check localStorage
            const token = localStorage.getItem('token');
            log(`Token in localStorage: ${token ? 'Present' : 'Missing'}`, token ? 'success' : 'error');
            
            // Check if we're on the right page
            if (window.location.href.includes('localhost:3000')) {
                log('Currently on frontend app', 'success');
            } else {
                log('Not on frontend app - please navigate to http://localhost:3000/login', 'error');
            }
        }

        // Listen for storage changes (when token is added)
        window.addEventListener('storage', function(e) {
            if (e.key === 'token') {
                log(`Token ${e.newValue ? 'added' : 'removed'} from localStorage`, e.newValue ? 'success' : 'info');
            }
        });

        // Check auth state on page load
        window.addEventListener('load', function() {
            log('Debug page loaded', 'info');
            checkAuthState();
        });
    </script>
</body>
</html>





